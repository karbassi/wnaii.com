function addListener(e,n,t){e.addEventListener?e.addEventListener(n,t):e.attachEvent&&e.attachEvent("on"+n,t)}var TIMEOUT_TIME=1E3,map,geocoder,timeoutPID,inputElement,canvasElement,answerElement,marker,RESET_TITLE,RESET_CENTER,RESET_ZOOM,FOUNT_ZOOM,RESET_NOT_FOUND="No <b>neighborhood</b> found.",initialize=function(){RESET_TITLE=document.title,RESET_CENTER=new google.maps.LatLng(41.875696,-87.624207),RESET_ZOOM=12,FOUNT_ZOOM=15,canvasElement=document.getElementsByTagName("div")[0],navigator.geolocation.getCurrentPosition(function(e){initialLocation=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),searchLocation(initialLocation),ga("send","event","result","auto")},function(){inputElement.className="invalid",resetMap(RESET_NOT_FOUND)})
var e={center:RESET_CENTER,zoom:RESET_ZOOM,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0}
map=new google.maps.Map(canvasElement,e),google.maps.Map.prototype.clearOverlays=function(){for(var e=0;e<markersArray.length;e++)markersArray[e].setMap(null)},geocoder=new google.maps.Geocoder
var n=function(){a(this.value,!1)},t=function(e){return a(this.value,!0),ga("send","event","form",e.type),!1},a=function(e,n){window.clearTimeout(timeoutPID),resetMap("Searching..."),timeoutPID=window.setTimeout(function(){searchLocation(e,n)},TIMEOUT_TIME)},o=document.getElementsByTagName("form")[0]
inputElement=document.getElementsByTagName("input")[0],answerElement=document.getElementsByTagName("p")[0],addListener(inputElement,"keyup",n),addListener(inputElement,"blur",t),addListener(o,"submit",t)},centerMap=function(){var e=RESET_CENTER,n=RESET_ZOOM
null!=marker&&(e=marker.position,n=FOUNT_ZOOM),map.setCenter(e),map.setZoom(n)},searchLocation=function(e,n){if(0===e.length)return resetMap(),void 0
var t=function(e,n){for(var t,a=0,o=e.address_components.length;o>a;a++)if(t=e.address_components[a],t.types[0]==n)return t
return!1},a=function(e,a){if(a!=google.maps.GeocoderStatus.OK)return resetMap(),ga("send","event","result","failed"),void 0
var o=e[0],r=t(o,"neighborhood").long_name
if(!r||!r.length)return inputElement.className="invalid",resetMap(RESET_NOT_FOUND),void 0
inputElement.className="valid"
var i=t(o,"country").long_name,s=t(o,"administrative_area_level_1").long_name
ga("send","event","country",i),ga("send","event","state",s),ga("send","event","neighborhood",r),map.setZoom(FOUNT_ZOOM),map.setCenter(o.geometry.location),null==marker?marker=new google.maps.Marker({map:map,position:o.geometry.location}):marker.setPosition(o.geometry.location),updateNeighborhood(r),n&&(inputElement.value=o.formatted_address)},o={address:e}
"string"!=typeof e&&(o={latLng:e}),geocoder.geocode(o,a)},resetMap=function(e){document.title=RESET_TITLE,e?(answerElement.style.display="block",answerElement.innerHTML=e):(answerElement.style.display="none",answerElement.innerHTML=""),marker&&(marker.setMap(null),marker=null),centerMap()},updateNeighborhood=function(e){if(!e||0===e.length)return resetMap(),void 0
var n="You live in "
document.title=n+e+".",answerElement.style.display="block",answerElement.innerHTML=n+"<b>"+e+"</b>."}
google.maps.event.addDomListener(window,"load",initialize),google.maps.event.addDomListener(window,"resize",centerMap),function(e,n,t,a,o,r,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=n.createElement(t),i=n.getElementsByTagName(t)[0],r.async=1,r.src=a,i.parentNode.insertBefore(r,i)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-40976307-3","wnaii.com"),ga("send","pageview")
